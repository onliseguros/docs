<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://developers.onli.com.br/fonts/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://developers.onli.com.br/fonts/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=https://developers.onli.com.br/main.4414785347b3ae11bebeee3ed71864e7e8fcdb86081704c4d64b44149e2267c45142c38c2b03aa5db7826cc35c1a885c3ed48c56d7819b66d8606827f6d7234a.css crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Affinity | Onli Seguros Developers</title><meta name=description content="Through our solutions, online insurance distribution has become much easier. Check out our documentation and our developers resources here."><link rel=canonical href=https://developers.onli.com.br/docs/customers/affinity/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Affinity"><meta property="og:description" content="Get Affinity Partnership Retrieve information about the current Affinity Partnership. It will return available products and current status with insurers.
GET /v1/affinity/partnership
Response The above request returns JSON structured like this:
Parameter Description customer The complete customer data products List of products available for this affinity partnership products.id The ID of the current product products.name The name of the current product products.assists List of assists available for the product products.coverages List of coverages available for the product { &#34;customer&#34;: {}, &#34;products&#34;: [ { &#34;id&#34;: &#34;string&#34;, &#34;name&#34;: &#34;string&#34;, &#34;assists&#34;: [], &#34;coverages&#34;: [] } ] } Create Affinity Request Before trying to create an affinity, you must create a affinity_request to &ldquo;prepare&rdquo; the process of contracting, receiving useful data for the rest of the process and to help proponent select desired configurations."><meta property="og:url" content="https://developers.onli.com.br/docs/customers/affinity/"><meta property="og:site_name" content="Onli Seguros Developers"><meta property="article:published_time" content="2020-10-13T15:21:01+02:00"><meta property="article:modified_time" content="2020-10-13T15:21:01+02:00"><meta property="og:image" content="https://developers.onli.com.br/onli.png"><meta property="og:image:alt" content="Onli Seguros Developers"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@onliseguros"><meta name=twitter:creator content="@onliseguros"><meta name=twitter:title content="Affinity"><meta name=twitter:description content><meta name=twitter:image content="https://developers.onli.com.br/onli.png"><meta name=twitter:image:alt content="Affinity"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://developers.onli.com.br/#/schema/organization/1","name":"Onli Tecnologia","url":"https://developers.onli.com.br/","sameAs":["https://twitter.com/onliseguros","https://github.com/onliseguros"],"logo":{"@type":"ImageObject","@id":"https://developers.onli.com.br/#/schema/image/1","url":"https://developers.onli.com.br/logo-onli.png","width":512,"height":512,"caption":"Onli Tecnologia"},"image":{"@id":"https://developers.onli.com.br/#/schema/image/1"}},{"@type":"WebSite","@id":"https://developers.onli.com.br/#/schema/website/1","url":"https://developers.onli.com.br/","name":"Onli Seguros Developers","description":"Through our solutions, online insurance distribution has become much easier. Check out our documentation and our developers resources here.","publisher":{"@id":"https://developers.onli.com.br/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://developers.onli.com.br/docs/customers/affinity/","url":"https://developers.onli.com.br/docs/customers/affinity/","name":"Affinity","description":"","isPartOf":{"@id":"https://developers.onli.com.br/#/schema/website/1"},"about":{"@id":"https://developers.onli.com.br/#/schema/organization/1"},"datePublished":"2020-10-13T15:21:01CET","dateModified":"2020-10-13T15:21:01CET","breadcrumb":{"@id":"https://developers.onli.com.br/docs/customers/affinity/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://developers.onli.com.br/docs/customers/affinity/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://developers.onli.com.br/docs/customers/affinity/"]}]},{"@type":"BreadcrumbList","@id":"https://developers.onli.com.br/docs/customers/affinity/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://developers.onli.com.br","url":"https://developers.onli.com.br","name":"Home"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://developers.onli.com.br/docs/","url":"https://developers.onli.com.br/docs/","name":"Docs"}},{"@type":"ListItem","position":4,"item":{"@type":"WebPage","@id":"https://developers.onli.com.br/docs/customers/","url":"https://developers.onli.com.br/docs/customers/","name":"Customers"}},{"@type":"ListItem","position":5,"item":{"@id":"https://developers.onli.com.br/docs/customers/affinity/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://developers.onli.com.br/#/schema/article/1","headline":"Affinity","description":"","isPartOf":{"@id":"https://developers.onli.com.br/docs/customers/affinity/"},"mainEntityOfPage":{"@id":"https://developers.onli.com.br/docs/customers/affinity/"},"datePublished":"2020-10-13T15:21:01CET","dateModified":"2020-10-13T15:21:01CET","author":{"@id":"https://developers.onli.com.br/#/schema/person/2"},"publisher":{"@id":"https://developers.onli.com.br/#/schema/organization/1"},"image":{"@id":"https://developers.onli.com.br/docs/customers/affinity/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://developers.onli.com.br/#/schema/person/2","name":"Onli","sameAs":[]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://developers.onli.com.br/docs/customers/affinity/#/schema/image/2","url":"https://developers.onli.com.br/onli.png","contentUrl":"https://developers.onli.com.br/onli.png","caption":"Affinity"}]}]}</script><meta name=theme-color content="#000"><link rel=icon type=image/x-icon href=https://developers.onli.com.br/favicon.ico></head><body class="docs single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label>
<a class="navbar-brand order-1 order-md-0 me-auto" href=https://developers.onli.com.br/><img src=https://developers.onli.com.br/images/logo.svg alt="Onli Seguros Developers">
<span>Developers & APIs</span></a><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/onliseguros><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2"><li class="nav-item active"><a class=nav-link href=https://developers.onli.com.br/docs/introduction/introduction/>Docs</a></li><li class=nav-item><a class=nav-link href=https://developers.onli.com.br/changelog/>Changelog</a></li><li class=nav-item><a class=nav-link href=https://onliseguros.atlassian.net/servicedesk>Support</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search in the docs..." aria-label="Search in the docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Introduction</h3><ul class=list-unstyled><li><a class=docs-link href=https://developers.onli.com.br/docs/introduction/introduction/>Introduction</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/introduction/about/>About the Platform</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/introduction/rest/>REST APIs</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/introduction/client-sdks/>Client SDKs</a></li></ul><h3>Security</h3><ul class=list-unstyled><li><a class=docs-link href=https://developers.onli.com.br/docs/security/authorization/>Authorization</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/security/notes/>Important Notes</a></li></ul><h3>Glossary</h3><ul class=list-unstyled><li><a class=docs-link href=https://developers.onli.com.br/docs/glossary/common_terms/>Common Terms</a></li></ul><h3>API - Brokers</h3><ul class=list-unstyled><li><a class=docs-link href=https://developers.onli.com.br/docs/brokers/merchant/>Merchant</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/brokers/channel/>Channel</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/brokers/product/>Product</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/brokers/lead/>Lead</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/brokers/quote/>Quote</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/brokers/sale/>Sale</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/brokers/charge/>Charge</a></li></ul><h3>API - Customers</h3><ul class=list-unstyled><li><a class="docs-link active" href=https://developers.onli.com.br/docs/customers/affinity/>Affinity</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/customers/recommendation/>Recommendation</a></li></ul><h3>API - Insurers</h3><ul class=list-unstyled><li><a class=docs-link href=https://developers.onli.com.br/docs/insurers/effect/>Effect</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/insurers/proposal/>Proposal</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/insurers/claim/>Claim</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/insurers/policy/>Policy</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/insurers/cashflow/>Cash Flow</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/insurers/financial_movement/>Financial Movement</a></li></ul><h3>Guides</h3><ul class=list-unstyled><li><a class=docs-link href=https://developers.onli.com.br/docs/guides/auto-insurance/>Auto Insurance</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/guides/life-insurance/>Life Insurance</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/guides/assists-coverages/>Assists and Coverages</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/guides/plans/>Plans</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/guides/paginate-lists/>How to Paginate</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/guides/filter-lists/>How to Filter</a></li></ul><h3>Help</h3><ul class=list-unstyled><li><a class=docs-link href=https://developers.onli.com.br/docs/help/troubleshooting/>Troubleshooting</a></li><li><a class=docs-link href=https://developers.onli.com.br/docs/help/faq/>FAQ</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><ul><li><a href=#get-affinity-partnership>Get Affinity Partnership</a></li><li><a href=#create-affinity-request>Create Affinity Request</a></li><li><a href=#create-affinity>Create Affinity</a></li><li><a href=#list-affinity>List Affinity</a></li><li><a href=#cancel-affinity>Cancel Affinity</a></li><li><a href=#webhooks>Webhooks</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>Affinity</h1><p class=lead></p><h3 id=get-affinity-partnership>Get Affinity Partnership<a href=#get-affinity-partnership class=anchor aria-hidden=true>#</a></h3><p>Retrieve information about the current Affinity Partnership. It will return available products and current status with insurers.</p><p><code>GET /v1/affinity/partnership</code></p><h5 id=response>Response<a href=#response class=anchor aria-hidden=true>#</a></h5><p>The above request returns JSON structured like this:</p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>customer</td><td>The complete customer data</td></tr><tr><td>products</td><td>List of products available for this affinity partnership</td></tr><tr><td>products.id</td><td>The ID of the current product</td></tr><tr><td>products.name</td><td>The name of the current product</td></tr><tr><td>products.assists</td><td>List of assists available for the product</td></tr><tr><td>products.coverages</td><td>List of coverages available for the product</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;customer&#34;</span>: {},
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;products&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;assists&#34;</span>: [],
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;coverages&#34;</span>: []
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=create-affinity-request>Create Affinity Request<a href=#create-affinity-request class=anchor aria-hidden=true>#</a></h3><p>Before trying to create an <code>affinity</code>, you must create a <code>affinity_request</code> to &ldquo;prepare&rdquo; the process of contracting, receiving
useful data for the rest of the process and to help proponent select desired configurations.</p><p><code>POST /v1/affinity/request</code></p><h5 id=body-parameters>Body Parameters<a href=#body-parameters class=anchor aria-hidden=true>#</a></h5><p>The request has the following parameters in body:</p><table><thead><tr><th>Parameter</th><th>Description</th><th></th></tr></thead><tbody><tr><td>product_id</td><td>The ID of the product selected for your partnership</td><td>Required</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;product_id&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h5 id=response-1>Response<a href=#response-1 class=anchor aria-hidden=true>#</a></h5><p>The above request returns JSON structured like this:</p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>The ID of the Affinity Request</td></tr><tr><td>plans</td><td>List of plans available for the product</td></tr><tr><td>plans.id</td><td>The ID of the current plan</td></tr><tr><td>plans.name</td><td>The name of the current plan</td></tr><tr><td>plans.assists</td><td>List of assists specified for the plan</td></tr><tr><td>plans.coverages</td><td>List of coverages specified for the plan</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;plans&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;assists&#34;</span>: [],
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;coverages&#34;</span>: []
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=create-affinity>Create Affinity<a href=#create-affinity class=anchor aria-hidden=true>#</a></h3><p><code>POST /v1/affinity</code></p><h5 id=body-parameters-1>Body Parameters<a href=#body-parameters-1 class=anchor aria-hidden=true>#</a></h5><p>The request has the following parameters in body:</p><table><thead><tr><th>Parameter</th><th>Description</th><th></th></tr></thead><tbody><tr><td>affinity_request_id</td><td>The ID of the affinity request</td><td>Required</td></tr><tr><td>lifetime_start</td><td>The lifetime start date</td><td>Required</td></tr><tr><td>lifetime_end</td><td>The lifetime end date</td><td>Required</td></tr><tr><td>plan_id</td><td>The ID of the plan chosen for this affinity</td><td>Optional</td></tr><tr><td>affinity_holder</td><td>The affinity holder data</td><td>Optional</td></tr><tr><td>item</td><td>The item associated with this affinity</td><td>Optional</td></tr></tbody></table><blockquote><p>The <code>affinity_holder</code> and <code>item</code> parameters from Create Affinity can vary depending on which type of insurance product your are contracting. See our guides to understand the possible values for each product.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;affinity_request_id&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;lifetime_start&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;lifetime_end&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;plan_id&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;affinity_holder&#34;</span>: {},
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;item&#34;</span>: {}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h5 id=response-2>Response<a href=#response-2 class=anchor aria-hidden=true>#</a></h5><p>The above request returns JSON structured like this:</p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>The ID of the Affinity</td></tr><tr><td>status</td><td>The status of affinity</td></tr><tr><td>attachments</td><td>The attachments and result of the affinity itself for each item</td></tr><tr><td>attachments.type</td><td>The attachment type</td></tr><tr><td>attachments.url</td><td>The attachment url</td></tr></tbody></table><h6 id=the-affinity-status-can-be>The affinity status can be:<a href=#the-affinity-status-can-be class=anchor aria-hidden=true>#</a></h6><table><thead><tr><th>Status</th><th>Name</th></tr></thead><tbody><tr><td>1</td><td>Issued</td></tr><tr><td>2</td><td>Canceled</td></tr><tr><td>3</td><td>Expired</td></tr><tr><td>4</td><td>Renewed</td></tr><tr><td>5</td><td>Pending</td></tr></tbody></table><h6 id=the-affinity-attachment-types-can-be>The affinity attachment types can be:<a href=#the-affinity-attachment-types-can-be class=anchor aria-hidden=true>#</a></h6><table><thead><tr><th>Status</th><th>Name</th></tr></thead><tbody><tr><td>1</td><td>Coi (Certificate of Insurance)</td></tr><tr><td>2</td><td>General Condition</td></tr><tr><td>3</td><td>Capitalization Regulation</td></tr><tr><td>4</td><td>Cancel</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;status&#34;</span>: <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;attachments&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;url&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=list-affinity>List Affinity<a href=#list-affinity class=anchor aria-hidden=true>#</a></h3><p><code>GET /v1/affinity</code></p><h5 id=url-parameters>URL Parameters<a href=#url-parameters class=anchor aria-hidden=true>#</a></h5><table><thead><tr><th>Parameter</th><th>Description</th><th></th></tr></thead><tbody><tr><td>rows</td><td>A limit of objects to be returned, between 1 and 100 items</td><td>Optional</td></tr><tr><td>page</td><td>The page for the list of objects to return</td><td>Optional</td></tr><tr><td>cursor</td><td>The cursor of the current page list of objects</td><td>Optional</td></tr></tbody></table><h5 id=response-3>Response<a href=#response-3 class=anchor aria-hidden=true>#</a></h5><p>The above request returns JSON structured like this:</p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>total</td><td>The total of items</td></tr><tr><td>items</td><td>The complete affinity data</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;total&#34;</span>: <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;items&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#960050;background-color:#1e0010>...</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=cancel-affinity>Cancel Affinity<a href=#cancel-affinity class=anchor aria-hidden=true>#</a></h3><p><code>DELETE /v1/affinity/{affinity_id}</code></p><h5 id=url-parameters-1>URL Parameters<a href=#url-parameters-1 class=anchor aria-hidden=true>#</a></h5><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>affinity_id</td><td>The ID of affinity to cancel</td></tr></tbody></table><h5 id=response-4>Response<a href=#response-4 class=anchor aria-hidden=true>#</a></h5><p>The above request returns JSON structured like this:</p><table><thead><tr><th>Parameter</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>The ID of the Affinity</td></tr><tr><td>status</td><td>The status canceled for the Affinity</td></tr><tr><td>date_end</td><td>The date affinity was canceled</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;status&#34;</span>: <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;date_end&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=webhooks>Webhooks<a href=#webhooks class=anchor aria-hidden=true>#</a></h3><p>In most cases, affinities may introduce a complexity that requires an async process in order to update their data.
In order to keep users updated about Affinity status, attachments, and another details from Insurer, you can make the
use of Webhooks to get the updates and do the necessary business logic in your system if necessary.</p><blockquote><p>The endpoint that our API uses to communicate with your server is configured in our stack. To configure your endpoint or change it, please, <strong>get in touch with our support</strong>.</p></blockquote><p>When an update occur, the following request will be make to your endpoint:</p><p><code>POST 'YOUR_ENDPOINT'</code></p><p>In the body at the request, the complete data of the Affinity will be sent as well:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;affinity_request_id&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;lifetime_start&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;lifetime_end&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;plan_id&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;affinity_holder&#34;</span>: {},
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;item&#34;</span>: {},
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;status&#34;</span>: <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;attachments&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#ae81ff>0</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;url&#34;</span>: <span style=color:#e6db74>&#34;string&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Your server must return a HTTP Status Code 200.</strong> Otherwise, new requests will be made periodically until your server returns the expected Http Status Code.
If multiple requests to your server endpoint fails, the updates/requests will be dammed, than requests will be made in sequence and order as soon as they were successful.</p><div class="docs-navigation d-flex justify-content-between"><a href=https://developers.onli.com.br/docs/brokers/charge/><div class="card my-1"><div class="card-body py-2">&larr; Charge</div></div></a><a class=ms-auto href=https://developers.onli.com.br/docs/customers/recommendation/><div class="card my-1"><div class="card-body py-2">Recommendation &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=text-center>© 2022 Onli Tecnologia - All rights reserved</div></div></footer><script src=https://developers.onli.com.br/js/bootstrap.min.8deaaad26b8d96f921d35daf928044661c90dcff16f84d34fb77c64ba4d9ecfffc70cda4852cbf0981e9e5374b2c006463dd5fe93b1fcf179772672edfba4826.js crossorigin=anonymous defer></script>
<script src=https://developers.onli.com.br/js/highlight.min.c4e199d4edbea269c7f847dd83415a511bcfc8d13b2aac2063d701ef67c402bdd31d0d1012a861f28c7d1e4d8cd46f4cea8d8bacd9136a7c913bba423be480c0.js crossorigin=anonymous defer></script>
<script src=https://developers.onli.com.br/main.min.6a604027000b7841e986cdbf62df32d026caa067ed5e6c77fc77f4962012ff897efaa9377dbb922dcea05d2a7cbceaa4c8487f6d9f0d3156f9c7ea0d47333552.js crossorigin=anonymous defer></script>
<script src=https://developers.onli.com.br/index.min.a3aecb3370791b6c6c974e999f6b370e55815c428dff3eee37e22dfb5b74479d5d8b73efe6fd1b6a0abcaa9e7665a285f6c5ad1df15a09f89c83b67af3d7c103.js crossorigin=anonymous defer></script></body></html>